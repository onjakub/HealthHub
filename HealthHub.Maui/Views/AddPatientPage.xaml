<?xml version="1.0" encoding="UTF-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:HealthHub.Maui.ViewModels"
             x:DataType="viewmodels:AddPatientViewModel"
             x:Class="HealthHub.Maui.Views.AddPatientPage"
             Title="Add Patient">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <Label Text="Add New Patient"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   Margin="0,0,0,20"/>

            <!-- Form Fields -->
            <VerticalStackLayout Spacing="15">

                <!-- First Name -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="First Name"
                           FontSize="16"/>
                    <Entry Text="{Binding FirstName}"
                           Placeholder="Enter first name"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Last Name -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Last Name"
                           FontSize="16"/>
                    <Entry Text="{Binding LastName}"
                           Placeholder="Enter last name"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Email -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Email"
                           FontSize="16"/>
                    <Entry Text="{Binding Email}"
                           Placeholder="Enter email"
                           Keyboard="Email"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Phone -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Phone"
                           FontSize="16"/>
                    <Entry Text="{Binding PhoneNumber}"
                           Placeholder="Enter phone number"
                           Keyboard="Telephone"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Address -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Address"
                           FontSize="16"/>
                    <Entry Text="{Binding Address}"
                           Placeholder="Enter address"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Date of Birth -->
                <VerticalStackLayout Spacing="5">
                    <Label Text="Date of Birth"
                           FontSize="16"/>
                    <DatePicker Date="{Binding DateOfBirth}"
                               FontSize="16"
                               BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Blood Type -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Blood Type"
                           FontSize="16"/>
                    <Entry Text="{Binding BloodType}"
                           Placeholder="Enter blood type"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

                <!-- Allergies -->
                <VerticalStackLayout Spacing="5"
                                     Padding="10">
                    <Label Text="Allergies"
                           FontSize="16"/>
                    <Entry Text="{Binding Allergies}"
                           Placeholder="Enter allergies"
                           FontSize="16"
                           BackgroundColor="#F5F5F5"/>
                </VerticalStackLayout>

            </VerticalStackLayout>

            <!-- Loading Indicator -->
            <ActivityIndicator IsVisible="{Binding IsLoading}"
                             IsRunning="{Binding IsLoading}"
                             Color="{DynamicResource Primary}"
                             HorizontalOptions="Center"/>

            <!-- Action Buttons -->
            <HorizontalStackLayout HorizontalOptions="FillAndExpand"
                                Spacing="15">
                <Button Text="Save"
                        Command="{Binding SavePatientCommand}"
                        BackgroundColor="{DynamicResource Primary}"
                        TextColor="White"
                        CornerRadius="10"
                        Padding="15,10"
                        HorizontalOptions="FillAndExpand"/>

                <Button Text="Cancel"
                        Command="{Binding CancelCommand}"
                        BackgroundColor="#6C757D"
                        TextColor="White"
                        CornerRadius="10"
                        Padding="15,10"
                        HorizontalOptions="FillAndExpand"/>
            </HorizontalStackLayout>

            <!-- Error Message -->
            <Label Text="{Binding ErrorMessage}"
                   TextColor="#DC3545"
                   FontSize="14"
                   IsVisible="{Binding HasError}"
                   HorizontalOptions="Center"
                   Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>